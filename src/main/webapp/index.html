<!DOCTYPE html>
<html ng-app="gisApp">
    <head>
        <!-- Bower components -->
        <script src="bower_components/angular/angular.js"></script>
        <script src="bower_components/angular-mocks/angular-mocks.js"></script>
        <script src="bower_components/angular-resource/angular-resource.js"></script>
        <script src="bower_components/angular-route/angular-route.js"></script>
        <script src="bower_components/angular-ui-router/release/angular-ui-router.js"></script>
        <script src="bower_components/angular-sanitize/angular-sanitize.js"></script>
        <script src="bower_components/jquery/dist/jquery.js"></script>
        <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
        <script src="bower_components/openlayers3/build/ol.js"></script>
        <script src="bower_components/angular-openlayers-directive/dist/angular-openlayers-directive.js"></script>
        <script src="bower_components/angular-smart-table/dist/smart-table.js"></script>
        <script src="bower_components/tinymce/tinymce.js"></script>
        <script src="bower_components/angular-ui-tinymce/src/tinymce.js"></script>
        <script src="bower_components/angular-toastr/dist/angular-toastr.tpls.js"></script>
        <script src="bower_components/angular-animate/angular-animate.js"></script>
        <!-- Project Scripts -->
        <script src="scripts/app.js"></script>
        <script src="scripts/olController.js"></script>
        <script src="scripts/olService.js"></script>
        <title>Start Page</title>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css"/>
        <link rel="stylesheet" href="bower_components/openlayers3/build/ol.css" />
        <link rel="stylesheet" href="bower_components/angular-toastr/dist/angular-toastr.css" />
        <link rel="stylesheet" href="bower_components/angular-openlayers-directive/css/markers.css" />

    </head>
    <body ng-controller="olController">
        <!--        https://github.com/tombatossals/angular-openlayers-directive-->
    <openlayers ol-center="center" ol-defaults="defaults" height="400">
        <ol-marker ng-repeat="szkola in szkoly" 
                   ol-marker-properties="szkola"></ol-marker>
    </openlayers>
    <div id="output"></div>
    <div id="options">
        <h3>Wybierz narzędzie:</h3>
        <ul id="controlToggle">
            <li>
                <input type="radio" name="type" value="none" id="noneToggle"
                       onclick="toggleControl(this);" checked="checked" />
                <label for="noneToggle">Nawigacja</label>
            </li>
            <li>
                <input type="radio" name="type" value="line" id="lineToggle" onclick="toggleControl(this);" />
                <label for="lineToggle">Mierzenie odległości</label>
            </li>
        </ul>
    </div>
    <div id="tabelka" class="table-responsive">
        <table class="table table-hover" st-table="displayedSzkoly" st-safe-src="szkoly">
            <thead>
                <tr>
                    <th st-sort="lon">lon</th>
                    <th st-sort="lat">lat</th>
                    <th st-sort="tytul">Tytuł</th>
                    <th st-sort="label.message">Opis</th>
                    <th>Edycja</th>
                </tr>
                <tr>
                    <th colspan="5"><input st-search="" class="form-control" placeholder="Wyszukaj..." type="text"/></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="szkola in displayedSzkoly">
                    <td>
                        <p>{{szkola.lon}}</p>
                    </td>
                    <td>
                        <p>{{szkola.lat}}</p>
                    </td>
                    <td>
                        <p>{{szkola.tytul}}</p>
                    </td>
                    <td>
                        <textarea  ng-bind-html="szkola.label.message"></textarea>
                    </td>
                    <td>
                        <button type="button" class="btn btn-primary" ng-click="edit(szkola)">
                            <span class="glyphicon glyphicon-pencil"> </span> Edytuj
                        </button>
                    </td>
                </tr>
            </tbody>   
        </table>
    </div>
    <div class="modal fade" id="editModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</span></button>
                    <h4 class="modal-title">Edycja</h4>
                </div>
                <form>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="tytul">Tytuł szkoły</label>
                            <input type="text" class="form-control" ng-model="selectedSzkola.tytul" id="tytul">
                        </div>
                        <div class="form-group">
                            <label for="tinymce-content">Opis</label>
                            <div class="form-control" id="tinymce-content" ui-tinymce="tinymceOptions" ng-model="selectedSzkola.label.message"></div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">
                            <span class="glyphicon glyphicon-remove"> </span> Anuluj
                        </button>
                        <button type="button" class="btn btn-primary" ng-click="save(selectedSzkola)">
                            <span class="glyphicon glyphicon-pencil"> </span> Zapisz zmiany
                        </button>
                    </div>
                </form>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
</body>
</html>
